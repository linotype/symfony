<?xml version="1.0" encoding="UTF-8" ?>
<container xmlns="http://symfony.com/schema/dic/services"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://symfony.com/schema/dic/services
        http://symfony.com/schema/dic/services/services-1.0.xsd">
    
    <services>
        
        <!-- Linotype: Inject Helper service -->
        <prototype namespace="Linotype\Helper\" resource="../../../../../linotype/Helper/*" public="true" autowire="true" autoconfigure="true"/>

        <!-- Linotype: Inject Services for helper -->
        <!-- <prototype namespace="Linotype\Bundle\Linotype\" resource="../../../src/Linotype/*" public="true" autowire="true" autoconfigure="true"/> -->

        <!-- Linotype: Core -->
        <service id="linotype" class="Linotype\Bundle\Core\Linotype" public="true">
            <argument type="service" id="service_container"/>
            <argument type="service" id="linotype.config"/>
        </service>
        <service alias="linotype" id="Linotype\Bundle\Core\Linotype" public="true"/>

        <!-- Linotype: Collector -->
        <service class="Linotype\Bundle\DataCollector\LinotypeCollector" id="Linotype\Bundle\DataCollector\LinotypeCollector" public="false">
            <argument type="service" id="linotype" />
            <tag name="data_collector" template="@Linotype/Collector/linotype.html.twig" id="linotype" />
        </service>

        <!-- Service: Config -->
        <service id="linotype.config" class="Linotype\Bundle\Service\LinotypeConfig" public="true">
            <argument type="service" id="service_container"/>
            <argument type="service" id="linotype.repo.meta"/>
        </service>
        <service alias="linotype.config" id="Linotype\Bundle\Service\LinotypeConfig" public="false"/>

        <!-- Service: Loader -->
        <service id="linotype.loader" class="Linotype\Bundle\Service\LinotypeLoader" public="true">
            <argument type="service" id="service_container"/>
            <argument type="service" id="twig"/>
            <argument type="service" id="linotype.config"/>
        </service>
        <service alias="linotype.loader" id="Linotype\Bundle\Service\LinotypeLoader" public="false"/>
        
        <!-- Service: LinotypeMetaRepository -->
        <service id="linotype.repo.meta" class="Linotype\Bundle\Repository\LinotypeMetaRepository" public="true">
            <argument type="service" id="Doctrine\Common\Persistence\ManagerRegistry"/>
        </service>
        <service alias="linotype.repo.meta" id="Linotype\Bundle\Repository\LinotypeMetaRepository" public="false"/>

        <!-- Service: LinotypeOptionRepository -->
        <service id="linotype.repo.option" class="Linotype\Bundle\Repository\LinotypeOptionRepository" public="true">
            <argument type="service" id="Doctrine\Common\Persistence\ManagerRegistry"/>
        </service>
        <service alias="linotype.repo.option" id="Linotype\Bundle\Repository\LinotypeOptionRepository" public="false"/>

        <!-- Service: LinotypeTemplateRepository -->
        <service id="linotype.repo.template" class="Linotype\Bundle\Repository\LinotypeTemplateRepository" public="true">
            <argument type="service" id="Doctrine\Common\Persistence\ManagerRegistry"/>
        </service>
        <service alias="linotype.repo.template" id="Linotype\Bundle\Repository\LinotypeTemplateRepository" public="false"/>

        <!-- Service: LinotypeMetaRepository -->
        <service id="linotype.repo.meta" class="Linotype\Bundle\Repository\LinotypeMetaRepository" public="true">
            <argument type="service" id="Doctrine\Common\Persistence\ManagerRegistry"/>
        </service>
        <service alias="linotype.repo.meta" id="Linotype\Bundle\Repository\LinotypeMetaRepository" public="false"/>

        <!-- Service: Test -->
        <service id="linotype.my_service" class="Linotype\Bundle\Service\MyService" public="true"/>
        <service alias="linotype.my_service" id="Linotype\Bundle\Service\MyService" public="false"/>

        <!-- Service: Twig -->
        <service id="linotype.twig" class="Linotype\Bundle\Twig\LinotypeTwig" public="true">
            <argument type="service" id="service_container"/>
            <argument type="service" id="twig"/>
            <argument type="service" id="linotype"/>
            <argument type="service" id="linotype.repo.meta"/>
            <tag name="twig.extension" />
        </service>
        <service alias="linotype.twig" id="Linotype\Bundle\Twig\LinotypeTwig" public="false"/>

        <!-- Controller: linotype -->
        <service id="linotype.controller" class="Linotype\Bundle\Controller\LinotypeController" public="true">
            <call method="setContainer">
                <argument type="service" id="Psr\Container\ContainerInterface"/>
            </call>
            <tag name="container.service_subscriber"/>
            <tag name="controller.service_arguments"/>
            <argument type="service" id="linotype.loader"/>
        </service>
        <service alias="linotype.controller" id="Linotype\Bundle\Controller\LinotypeController" public="true"/>

        <!-- Controller: admin -->
        <service id="linotype.controller.admin" class="Linotype\Bundle\Controller\LinotypeAdminController" public="true">
            <call method="setContainer">
                <argument type="service" id="Psr\Container\ContainerInterface"/>
            </call>
            <tag name="container.service_subscriber"/>
            <tag name="controller.service_arguments"/>
            <argument type="service" id="linotype.loader"/>
        </service>
        <service alias="linotype.controller.admin" id="Linotype\Bundle\Controller\LinotypeAdminController" public="true"/>

        <!-- Controller: admin block -->
        <service id="linotype.controller.admin.block" class="Linotype\Bundle\Controller\LinotypeAdminBlockController" public="true">
            <call method="setContainer">
                <argument type="service" id="Psr\Container\ContainerInterface"/>
            </call>
            <tag name="container.service_subscriber"/>
            <tag name="controller.service_arguments"/>
            <argument type="service" id="linotype.loader"/>
        </service>
        <service alias="linotype.controller.admin.block" id="Linotype\Bundle\Controller\LinotypeAdminBlockController" public="true"/>

        <!-- Controller: helper -->
        <service id="linotype.controller.helper" class="Linotype\Bundle\Controller\LinotypeHelperController" public="true">
            <call method="setContainer">
                <argument type="service" id="Psr\Container\ContainerInterface"/>
            </call>
            <tag name="container.service_subscriber"/>
            <tag name="controller.service_arguments"/>
            <argument type="service" id="linotype.loader"/>
        </service>
        <service alias="linotype.controller.helper" id="Linotype\Bundle\Controller\LinotypeHelperController" public="true"/>

        <!-- Routing -->
        <service id="Linotype\Bundle\Routing\ExtraLoader" public="true">
            <argument type="service" id="linotype" />
            <tag name="routing.loader"/>
        </service>

    </services>
</container>